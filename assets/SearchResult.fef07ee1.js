import{u as W,f as S,g as Q,h as X,i as $,j as Z,k as z,S as _,t as ee,l as te,m as le,n as ae,p as r,R as oe,q as C,s as ne,v as re,x as se,y as ue}from"./app.249e7de6.js";function ie(l){if(Array.isArray(l)){for(var e=0,t=Array(l.length);e<l.length;e++)t[e]=l[e];return t}else return Array.from(l)}var Y=!1;if(typeof window<"u"){var O={get passive(){Y=!0}};window.addEventListener("testPassive",null,O),window.removeEventListener("testPassive",null,O)}var D=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),g=[],T=!1,B=-1,H=void 0,b=void 0,I=function(e){return g.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},k=function(e){var t=e||window.event;return I(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},ce=function(e){if(b===void 0){var t=!!e&&e.reserveScrollBarGap===!0,a=window.innerWidth-document.documentElement.clientWidth;t&&a>0&&(b=document.body.style.paddingRight,document.body.style.paddingRight=a+"px")}H===void 0&&(H=document.body.style.overflow,document.body.style.overflow="hidden")},de=function(){b!==void 0&&(document.body.style.paddingRight=b,b=void 0),H!==void 0&&(document.body.style.overflow=H,H=void 0)},ve=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},fe=function(e,t){var a=e.targetTouches[0].clientY-B;return I(e.target)?!1:t&&t.scrollTop===0&&a>0||ve(t)&&a<0?k(e):(e.stopPropagation(),!0)},he=function(e,t){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!g.some(function(o){return o.targetElement===e})){var a={targetElement:e,options:t||{}};g=[].concat(ie(g),[a]),D?(e.ontouchstart=function(o){o.targetTouches.length===1&&(B=o.targetTouches[0].clientY)},e.ontouchmove=function(o){o.targetTouches.length===1&&fe(o,e)},T||(document.addEventListener("touchmove",k,Y?{passive:!1}:void 0),T=!0)):ce(t)}},pe=function(){D?(g.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),T&&(document.removeEventListener("touchmove",k,Y?{passive:!1}:void 0),T=!1),B=-1):de(),g=[]};const ye="eJyVlc+P0kAUx/+VZs47YGF74bwXL3rgaIyppZHG0pJ2jDEbEtyNu5h1JasYzYYoHDQkku56UFlgwz/TmcGT/4IDLfR3GQ80oX3fz3vzfa+vh6AIKv4FaUhXQQUsnSF1PpL+lN5e0FmfjntL5xrsAcU0kGogG1QeHIK6KtdUKyfa1p894YM9bO2FeJlS/GVKh20+qa/oHi3bx2Q0xJ/P4jqmBEVDRc9N6yl8LNuakudBRm5QlJtNXVNkpJkG1OUXqgWblolMxdSLNcNe/aBdK9RRQw/TD+5VYfVAwOfdpeP8PzWGSuWEbImE+AatCstIH1KSwQQvjvHJK+zcBNrY3aStO8pvsEvCkgbHQaIxfjUrGsdRxILgztruTYd8uhJSQY9EuI2AnNQSo06mnsy9XdDeaM0OQUswFrBG5zHLBYH86pCXV2Qwx/NuiFWGsQe7Jlqpy02kWnfEyMjQ8VgQBfp98Hd++ad96S6G7uStN+eZ1jP7kqGBcbmYeCNY7nWUJ2KvFumPybcjvPgZYYowJ4z35KXEyUv+yf199GPGlsO2cHL2nry+yHSBtTtfFnSdGx8fqI07njTC3DiyfcTrQjnhQjniAv79lY6CMr2/eNJJWU3pCfYTCfb9BHjaY0OP370hH67JedqySydKCaIULTm021nhZHCKT0927A9p07588cZwybebO1W0lRJr5f3qXSH2FQroIjRtDeZ/pFqtf4DgfxA=";const M=()=>r(C,{name:"heading"},()=>r("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));M.displayName="HeadingIcon";const E=()=>r(C,{name:"heart"},()=>r("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));E.displayName="HeartIcon";const G=()=>r(C,{name:"history"},()=>r("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));G.displayName="HistoryIcon";const P=()=>r(C,{name:"title"},()=>r("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));P.displayName="TitleIcon";const me="search-pro-history",m=W(me,[]),ge=(l=5)=>{const e=t=>{m.value.length<l?m.value=Array.from(new Set([t,...m.value])):m.value=Array.from(new Set([...m.value.slice(0,l-1),t]))};return{history:ne(m),addHistory:e}},we=S(ye),Se=Q(()=>JSON.parse(re(we.value))),He={},be=300,Le={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},A=(l,e)=>{const t=[];let a=0,o=0;const u=l.toLowerCase(),p=e.toLowerCase();let i=u.indexOf(p,a);const f=(s,c)=>{let n=s,h=!1;if(!c&&n.length>100&&o===0&&(n=`… ${n.slice(-10)}`),o+n.length>100){if(t.some(w=>w[0]==="strong"))return;n=n.slice(0,Math.max(100-o,1)),h=!0}n.length&&(t.push(c?["strong",n]:n),o+=n.length),h&&(t.push("…"),o+=2)};if(i<0)return null;for(;i>=0;){const s=i+p.length;if(f(l.slice(a,i),!1),f(l.slice(i,s),!0),a=s,i=u.indexOf(p,a),o>100)break}return f(l.slice(a),!1),t},j=l=>l.reduce((e,{type:t})=>e+(t==="title"?50:t==="heading"?20:t==="custom"?10:1),0),Ae=(l,e)=>{var t;const a={};for(const[o,u]of Object.entries(e)){const p=((t=e[o.replace(/\/[^\\]*$/,"")])==null?void 0:t.title)||"",i=`${p?`${p} > `:""}${u.title}`,f=A(u.title,l);f&&(a[i]=[...a[i]||[],{type:"title",path:o,display:f}]),u.customFields&&Object.entries(u.customFields).forEach(([s,c])=>{c.forEach(n=>{const h=A(n,l);h&&(a[i]=[...a[i]||[],{type:"custom",path:o,index:s,display:h}])})});for(const s of u.contents){const c=A(s.header,l);c&&(a[i]=[...a[i]||[],{type:"heading",path:o+(s.slug?`#${s.slug}`:""),display:c}]);for(const n of s.contents){const h=A(n,l);h&&(a[i]=[...a[i]||[],{type:"content",header:s.header||u.title||"Documentation",path:o+(s.slug?`#${s.slug}`:""),display:h}])}}}return Object.keys(a).sort((o,u)=>j(a[o])-j(a[u])).map(o=>({title:o,contents:a[o]}))},Qe=l=>{const e=z(),t=S([]),a=Q(()=>Se.value[e.value]),o=ue(u=>{t.value=u?Ae(u,a.value):[]},be);return se([l,e],()=>{o(l.value)}),t};var ke=X({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(l,{emit:e}){const t=$(),a=Z(),o=z(),u=_(Le),{history:p,addHistory:i}=ge(),f=ee(l,"query"),s=Qe(f),c=S(0),n=S(0),h=S(),w=Q(()=>s.value.length>0),R=Q(()=>s.value[c.value]||null),J=()=>{c.value=c.value>0?c.value-1:s.value.length-1,n.value=R.value.contents.length-1},F=()=>{c.value=c.value<s.value.length-1?c.value+1:0,n.value=0},U=()=>{n.value<R.value.contents.length-1?n.value=n.value+1:F()},q=()=>{n.value>0?n.value=n.value-1:J()},N=d=>d.map(v=>typeof v=="string"?v:r(v[0],v[1])),K=d=>{if(d.type==="custom"){const v=He[d.index]||"$content",[x,L=""]=typeof v=="object"?v[o.value].split("$content"):v.split("$content");return N([x,...d.display,L])}return N(d.display)};return te(()=>{le("keydown",d=>{if(w.value){if(d.key==="ArrowUp")q();else if(d.key==="ArrowDown")U();else if(d.key==="Enter"){const v=R.value.contents[n.value].path;a.path!==v&&(t.push(v),i(f.value),e("updateQuery",""),e("close"))}}}),he(h.value,{reserveScrollBarGap:!0})}),ae(()=>{pe()}),()=>r("div",{class:["search-pro-result",{empty:f.value===""?p.value.length===0:!w.value}],ref:h},f.value===""?p.value.length?r("ul",{class:"search-pro-result-list"},p.value.map(d=>r("li",{class:"search-pro-result-list-item"},[r("div",{class:"search-pro-result-title"},u.value.history),r("div",{class:"search-pro-result-item",onClick:()=>{e("updateQuery",d)}},[r(G,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},d)])]))):u.value.emptyHistory:w.value?r("ul",{class:"search-pro-result-list"},s.value.map(({title:d,contents:v},x)=>{const L=c.value===x;return r("li",{class:["search-pro-result-list-item",{active:L}]},[r("div",{class:"search-pro-result-title"},d||"Documentation"),v.map((y,V)=>r(oe,{to:y.path,class:["search-pro-result-item",{active:L&&n.value===V}],onClick:()=>{i(f.value),e("updateQuery",""),e("close")}},()=>[y.type==="content"?null:r(y.type==="title"?P:y.type==="heading"?M:E,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},[y.type==="content"?r("div",{class:"content-header"},y.header):null,r("div",K(y))])]))])})):u.value.emptyResult)}});export{ke as default};
